https://www.laravel.com/
https://laravel.com/docs/5.5/
Debugging with php methods
var_dump($var)
dd($var)

Dependencies
	apt install php7.1 php7.1-xml php7.1-mbstring php7.1-zip
7.2	apt install php7.2-xml php7.2-mbstring php7.2-zip
	npm install -g cross-env

Install via composer
	composer global require "laravel/installer"
Make env variables in ~/.profile
PATH=$PATH:$HOME/.composer/vendor/bin

Create a fresh Larvel installation
	laravel new blog
Change webroot to blog/public
Configuration files in blog/config
Change directory permissions
	sudo chown www-data:www-data -R blog/


Open a shell
	php artisan tinker
App\Task::all();
App\Task::where('id','>',1)->get();
App\Task::pluck('body');
App\Task::pluck('body')->first();

Change Application Key in the .env file
	php artisan key:generate

Start built-in server
	php artisan serve

Help
	php artisan help make:migration

Define routes in web file routes/web.php
Route::get('/', 'MainController@index');
Route::resource('posts', 'PostsController');

Load views in resources/views

Reference variables in routes
return view('welcome', [
  'name' => 'David'
]);
return view('welcome')->with('name', 'David');
$name = 'David';
 return view('welcome', compact('name'));

Validate a request
https://laravel.com/docs/5.5/validation#available-validation-rules
	$this->validate(request(), [
		'title' => 'required',
		'body' => 'required'
	]);
New since laravel 5.5
	request()->validate([
		'title' => 'required|min:3',
		'body' => [
			'required',
			'max:100'
		]
	]);
Returns validated data, and nothing outside the validation schema
	$validatedData = request()->validate([
		'title' => 'required',
		'body' => 'required'
	]);
When validation fails, function flow stops there
Test
	dd($validatedData);
	dd(request()->all());
	\App\Client::forceCreate($validatedData);
Create custom rules
	php artisan make:rule MustBeFiveCharacters
	php artisan make:rule SpamFree
Creates app/Rules/MustBeFiveCharacters.php
	$validatedData = request()->validate([
		'title' => new App\Rules\MustBeFiveCharacters,
		'body' => 'required'
	]);
If need to pass arguments to the rule constructor, use new App\Rules\MustBeFiveCharacters($arg0, $arg1)

Print validation errors in blade view
	@if (count($errors))
		<ul>
		@foreach($errors->all() as $error)
			<li>{{ $error }}</li>
		@endforeach
		</ul>
	@endif

Query Database
	$tasks = DB::table('tasks')->get();

DB migrations
Create the database.
Edit db credentials in .env

Prevent the Schema length error
https://laracasts.com/discuss/channels/laravel/php-artisan-migrate-errorclass-appprovidersschema-not-found
https://laracasts.com/discuss/channels/general-discussion/syntax-error-or-access-violation-1071-specified-key-was-too-long
Open app/Providers/AppServiceProvider.php, write:

	use Illuminate\Support\Facades\Schema;

Inside boot method write:
	Schema::defaultStringLength(191);

Run migration
	php artisan migrate

Migration files in database/migrations
Give it a name that corresponds to what I am doing
	php artisan make:migration create_tasks_table --create=tasks
To apply more changes, clear the dump
	composer dump-autoload
Migrate the database
	php artisan migrate
To modify a schema, edit the migration file and 
	php artisan migrate:refresh
Rollbacks the migration and re-runs it.

Drop every table and start from scratch
	php artisan migrate:fresh

To undo last migration
	php artisan migrate:rollback
Undo everything
	php artisan migrate:reset

Seeder will load and inesrt data into the database
	php artisan make:seeder ListingsTableSeeder
Edit database/ListingsTableSeeder.php at the run method:
	$path = base_path() . '/database/data.json';
	$file = File::get($path);
	$data = json_decode($file, true);
	DB::table('listings')->insert($data);
	
Edit database/DatabaseSeeder.php run method with:
	$this->call(ListingsTableSeeder::class);
When we run the seeder, any code in the run method is executed.
	php artisan db:seed

Make a model
	php artisan make:model Task
File is created at app/Task.php
Add castings as an class array variable
	protected $casts = [
      'amenity_wifi' => 'boolean',
      'amenity_pets_allowed' => 'boolean',
      'amenity_tv' => 'boolean',
      'amenity_kitchen' => 'boolean',
      'amenity_breakfast' => 'boolean',
      'amenity_laptop' => 'boolean'
    ];
Create the model and table
	composer dump-autoload
	php artisan make:model Task -m
Create the model, table and controller
	php artisan make:model Task -mc
Update the filename
	mv app/Http/Controllers/Post{,s}Controller.php
Migrate the database
	php artisan migrate
Make a change and refresh
	php artisan migrate:refresh
Do some tinkering
	php artisan tinker
	$task = new App\Task;
	$task->body = 'Go to the market';
	$task->save();

Make a controller
	php artisan make:controller TasksController
It creates it in app/Http/Controllers/TasksController.php

Create a factory
	php artisan make:factory ClientFactory
New factory is at database/factories/ClientFactory.php
Order 10 factories
	php artisan tinker
	factory('App\Client', 10)->create();
	App\Client->all();

Using CSRF field. Add it to a blade view
	{{ csrf_field() }}

Email layout testing
	php artisan make:mail Welcome --markdown=emails.welcome
Return a class instance as a view
	return new App\Mail\Welcome;
Files created:
app/Mail
resources/views/emails

Collection dump and dd method
	$videos = App\Video::all();
	$videos = $videos
		->shuffle()
		->dump()
		->filter->archived()
		->dump()
		->pluck('title')
		->dump();
->dd() will dump and stop the execution.

Custom 'If'
	@member
		<p>You are a subscribed user.</p>
	@else
		<p>You are just a guest.</p>
	@endmember
Open AppServiceProvider.php, at boot method write:
	\Blade:if('member', function(){
		// return true;
		return auth()->check() && auth()->user()->isSubscribed();
	});
	\Blade:if('guest', function($param1){
		// return true;
		//return !auth()->check() && auth()->user()->isSubscribed();
		return auth()->guest();
	});
Pass an argument
	@guest('myargument1')
Clear view cache
	php artisan view:clear
Simulate a login
	auth()->loginUsingId(1);
Lumen
https://lumen.laravel.com/docs/5.4
	composer global require "laravel/lumen-installer"
	php -S localhost:8080 -t public/

Front end presets
	php artisan preset none
	php artisan preset bootstrap

https://laravel.com/docs/5.6/authentication#introduction
See Path Customization, Username Customization and Retrieving The Authenticated User
	php artisan make:auth
	php artisan migrate:refresh
